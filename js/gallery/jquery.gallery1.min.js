(function(a){a.fn.fadeGallery=function(){a(this).each(function(){if(!a(this).is("a")){throw"Passed collections must be <a/> element.";return false}if(a(this).find("img").length==0){throw"Passed a elements must contain <img/>(thumbnail) element.";return false}});var j=arguments[0]||{};j.target=j.target||false;j.thumbSize=parseInt(j.thumbSize)||50;j.thumbWidth=parseInt(j.thumbWidth)||false;j.thumbHeight=parseInt(j.thumbHeight)||false;j.borderColor=j.borderColor||"#830113";if(!j.target){throw"Target div must be defined.";return false}if(a.isFunction(a.loadImages)!=true){throw"Jquery.loadImages must be loaded first.";return false}var o=j.thumbWidth!=false?j.thumbWidth:j.thumbSize;var f=j.thumbHeight!=false?j.thumbHeight:j.thumbSize;var d=0;var g=a("#"+j.target);var b=a("<div/>").css("position","relative");var q=a("<img/>").css("display","block").appendTo(b);var h=a(this);var p=a('<div class="selected"/>').css({position:"absolute",top:"0px",left:"0px",width:j.thumbWidth-8+"px",height:j.thumbHeight-8+"px",border:"4px solid "+j.borderColor});var c=a('<div class="loading"/>').css({position:"absolute"});var n=a("<div/>").css({position:"absolute",top:"0px",left:"0px",background:"#000",opacity:0.6});var l=a('<div class="holder"/>').css({"float":"left","margin-bottom":"2px","margin-right":"2px",width:j.thumbWidth+"px",height:j.thumbHeight+"px",display:"block",background:"#141414"});n.timer=null;h.each(function(r,s){a(this).css({opacity:0.5,position:"relative",width:j.thumbWidth+"px",height:j.thumbHeight+"px","float":"left","margin-bottom":"2px","margin-right":"2px"});a(this).find("img").css({width:j.thumbWidth+"px",height:j.thumbHeight+"px",border:"none"})});var e=Math.floor(h.parent().width()/(j.thumbWidth+2));var m=e-(h.length%e);if(m>0){for(d=0;d<m;d++){h.parent().append(l.clone())}}h.parent().append('<div style="clear:both"/>');g.append(b);q.appendTo(b);function k(i){if(!i.hasClass("selected")){var r=i.attr("href");clearTimeout(n.timer);n.css({width:q.width()+"px",height:q.height()+"px",opacity:0}).appendTo(b);n.stop(true).animate({opacity:0.7},300);n.timer=setTimeout(function(){a.loadImages([r],function(){c.remove();q.attr("src",r);n.stop(true).animate({opacity:0},300,function(){n.remove()})})},300);b.append(c);h.removeClass("selected").css("opacity",0.5);i.addClass("selected").css("opacity",1).prepend(p)}}h.hover(function(){if(a(this).hasClass("selected")==false){a(this).stop(true).animate({opacity:1},300)}},function(){if(a(this).hasClass("selected")==false){a(this).stop(true).animate({opacity:0.5},500)}});h.click(function(){k(a(this));return false});k(h.first())}})(jQuery);